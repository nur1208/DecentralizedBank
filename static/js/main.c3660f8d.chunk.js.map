{"version":3,"sources":["Web3Client.js","dbank.png","App.jsx","reportWebVitals.js","index.js"],"names":["selectedAccount","nftContract","init","a","provider","window","ethereum","console","log","request","method","accounts","on","web3","Web3","eth","net","getId","networkId","address","NFTBuildContract","networks","Contract","abi","App","useState","account","setAccount","balance","setBalance","setWeb3","dBank","setDBank","setToken","setDBankAddress","depositAmount","setDepositAmount","DBCBalance","setDBCBalance","handlerCallingBlackChain","functionName","sendObject","undefined","methods","mint","send","from","deposit","amount","value","toString","withdraw","loadBlockchainData","dispatch","web3Local","netId","getAccounts","getBalance","localBalance","alert","dBankLocalAddress","DBank","tokenLocal","Token","dBankLocal","balanceOf","call","localDBCBalance","decimals","isDeposited","useEffect","className","href","target","rel","style","display","justifyContent","alignItems","src","dbank","alt","height","marginLeft","Number","toFixed","role","Tabs","defaultActiveKey","id","Tab","eventKey","title","onSubmit","e","preventDefault","amountLocal","step","type","placeholder","onChange","required","onClick","class","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c3660f8d.chunk.js","sourcesContent":["import Web3 from \"web3\";\r\n// import NFTBuildContract from \"./build/contracts/NFT.json\";\r\nimport NFTBuildContract from \"./abis/NFT.json\";\r\n\r\nlet selectedAccount;\r\nlet nftContract;\r\nexport const init = async () => {\r\n  // const providerUrl =\r\n  //   process.env.PROVIDER_URL || \"http://127.0.0.1:8545\";\r\n  let provider = window.ethereum;\r\n\r\n  console.log({ provider });\r\n  if (typeof provider !== \"undefined\") {\r\n    // MateMask installed\r\n\r\n    try {\r\n      const accounts = await provider.request({\r\n        method: \"eth_requestAccounts\",\r\n      });\r\n      selectedAccount = accounts[0];\r\n\r\n      console.log(`selected account is ${selectedAccount}`);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    window.ethereum.on(\"accountsChanged\", (accounts) => {\r\n      selectedAccount = accounts[0];\r\n\r\n      console.log(\r\n        `selected account changed to ${selectedAccount}`\r\n      );\r\n    });\r\n  }\r\n  const web3 = new Web3(provider);\r\n  const networkId = await web3.eth.net.getId();\r\n\r\n  const address = NFTBuildContract.networks[networkId].address;\r\n\r\n  nftContract = new web3.eth.Contract(\r\n    NFTBuildContract.abi,\r\n    address\r\n  );\r\n};\r\n\r\nexport const mintToken = () => {\r\n  return nftContract.methods\r\n    .mint(selectedAccount)\r\n    .send({ from: selectedAccount });\r\n};\r\n","export default __webpack_public_path__ + \"static/media/dbank.49ac29b5.png\";","import { useEffect, useState } from \"react\";\r\nimport { Tabs, Tab } from \"react-bootstrap\";\r\nimport { init, mintToken } from \"./Web3Client\";\r\nimport Token from \"./abis/Token.json\";\r\nimport DBank from \"./abis/DBank.json\";\r\n\r\nimport Web3 from \"web3\";\r\nimport dbank from \"./dbank.png\";\r\nfunction App() {\r\n  const [account, setAccount] = useState(null);\r\n  const [balance, setBalance] = useState(0);\r\n  const [web3, setWeb3] = useState(null);\r\n  const [dBank, setDBank] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n  const [dBankAddress, setDBankAddress] = useState(\"\");\r\n  const [depositAmount, setDepositAmount] = useState(\"\");\r\n  const [DBCBalance, setDBCBalance] = useState(0);\r\n  const handlerCallingBlackChain = async (\r\n    functionName,\r\n    sendObject\r\n  ) => {\r\n    console.log(\"handlerCallingBlackChain called\");\r\n\r\n    if (dBank !== null && dBank !== undefined) {\r\n      try {\r\n        console.log(dBank.methods);\r\n        console.log(dBank.methods[functionName]);\r\n        await mintToken();\r\n        await dBank.methods[functionName]().send(sendObject);\r\n      } catch (error) {\r\n        console.log(`Error, ${functionName}: `, error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const deposit = async (amount) => {\r\n    console.log(\"deposit called\");\r\n\r\n    await handlerCallingBlackChain(\"deposit\", {\r\n      from: account,\r\n      value: amount.toString(),\r\n    });\r\n  };\r\n\r\n  const withdraw = async (amount) => {\r\n    console.log(\"withdraw called\");\r\n\r\n    await handlerCallingBlackChain(\"withdraw\", {\r\n      from: account,\r\n    });\r\n  };\r\n\r\n  const loadBlockchainData = async (dispatch) => {\r\n    console.log(\"loadBlockchainData called\");\r\n    if (typeof window.ethereum !== \"undefined\") {\r\n      const web3Local = new Web3(window.ethereum);\r\n      const netId = await web3Local.eth.net.getId();\r\n      const selectedAccount = (\r\n        await web3Local.eth.getAccounts()\r\n      )[0];\r\n\r\n      console.log({ account: selectedAccount });\r\n      //load balance\r\n      if (selectedAccount !== \"undefined\") {\r\n        const localBalance = await web3Local.eth.getBalance(\r\n          selectedAccount\r\n        );\r\n\r\n        setAccount(selectedAccount);\r\n        setBalance(localBalance);\r\n        setWeb3(web3Local);\r\n      } else {\r\n        window.alert(\"Please login with MetaMask\");\r\n      }\r\n\r\n      //load contracts\r\n\r\n      try {\r\n        const dBankLocalAddress = DBank.networks[netId].address;\r\n        const tokenLocal = new web3Local.eth.Contract(\r\n          Token.abi,\r\n          Token.networks[netId].address\r\n        );\r\n\r\n        const dBankLocal = new web3Local.eth.Contract(\r\n          DBank.abi,\r\n          dBankLocalAddress\r\n        );\r\n        const localDBCBalance = await tokenLocal.methods\r\n          .balanceOf(selectedAccount)\r\n          .call();\r\n        console.log(await tokenLocal.methods.decimals().call());\r\n        console.log(\r\n          await dBankLocal.methods\r\n            .isDeposited(selectedAccount)\r\n            .call()\r\n        );\r\n\r\n        setDBCBalance(localDBCBalance);\r\n        setToken(tokenLocal);\r\n        setDBank(dBankLocal);\r\n        setDBankAddress(dBankLocalAddress);\r\n      } catch (error) {\r\n        console.log(\"Error\", error);\r\n        console.log(error);\r\n\r\n        window.alert(\r\n          \"Contracts not deployed to the current network\"\r\n        );\r\n      }\r\n    } else {\r\n      window.alert(\"Please install MetaMask\");\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    (async () => {\r\n      await init();\r\n      console.log(\"here\");\r\n      await loadBlockchainData();\r\n      // await deposit(10 ** 16);\r\n    })();\r\n  }, []);\r\n  // const [balance, setBalance] = useState(0);\r\n\r\n  // const mint = () => {};\r\n  return (\r\n    // <div className=\"App\">\r\n    //   app {balance}{\" \"}\r\n    //   <button onClick={async () => await deposit(10 ** 16)}>\r\n    //     deposit\r\n    //   </button>{\" \"}\r\n    // </div>\r\n    <div className=\"text-monospace\">\r\n      <nav className=\"navbar navbar-dark  fixed-top bg-dark flex-md-nowrap p-0 shadow\">\r\n        <a\r\n          className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\r\n          href=\"http://www.dappuniversity.com/bootcamp\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <img\r\n              src={dbank}\r\n              className=\"App-logo\"\r\n              alt=\"logo\"\r\n              height=\"32\"\r\n            />\r\n            <b style={{ marginLeft: \"10px\" }}>d₿ank</b>\r\n          </div>\r\n        </a>\r\n      </nav>\r\n      <div\r\n        className=\"container-fluid pt-3 mt-5 text-center\"\r\n        style={{ height: \"75vh\" }}\r\n      >\r\n        <h1>Welcome to d₿ank</h1>\r\n        <h2>{account}</h2>\r\n        <h4>\r\n          your current {(Number(balance) / 10 ** 18).toFixed(4)}{\" \"}\r\n          eth\r\n        </h4>\r\n        <h4>\r\n          your current{\" \"}\r\n          {(Number(DBCBalance) / 10 ** 18).toFixed(10)} DBC\r\n        </h4>\r\n        <div className=\"row\">\r\n          <main\r\n            role=\"main\"\r\n            className=\"col-lg-12 d-flex text-center\"\r\n          >\r\n            <div className=\"content mr-auto ml-auto\">\r\n              <Tabs\r\n                defaultActiveKey=\"profile\"\r\n                id=\"uncontrolled-tab-example\"\r\n              >\r\n                <Tab eventKey=\"deposit\" title=\"Deposit\">\r\n                  <div>\r\n                    <br></br>\r\n                    How much do you want to deposit?\r\n                    <br></br>\r\n                    (min. amount is 0.01 ETH)\r\n                    <br></br>\r\n                    (1 deposit is possible at the time)\r\n                    <br></br>\r\n                    <form\r\n                      onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                        let amountLocal = depositAmount;\r\n                        amountLocal = amountLocal * 10 ** 18; //convert to wei\r\n                        deposit(amountLocal);\r\n                      }}\r\n                    >\r\n                      <div className=\"form-group mr-sm-2\">\r\n                        <br></br>\r\n                        <input\r\n                          id=\"depositAmount\"\r\n                          step=\"0.01\"\r\n                          type=\"number\"\r\n                          placeholder=\"amount...\"\r\n                          onChange={(e) =>\r\n                            setDepositAmount(e.target.value)\r\n                          }\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary\"\r\n                      >\r\n                        DEPOSIT\r\n                      </button>\r\n                    </form>\r\n                  </div>\r\n                </Tab>\r\n                <Tab eventKey=\"withdraw\" title=\"Withdraw\">\r\n                  <br></br>\r\n                  Do you want to withdraw + take interest?\r\n                  <br></br>\r\n                  <br></br>\r\n                  <div>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary\"\r\n                      onClick={(e) => withdraw(e)}\r\n                    >\r\n                      WITHDRAW\r\n                    </button>\r\n                  </div>\r\n                </Tab>\r\n                {/* <Tab eventKey=\"borrow\" title=\"Borrow\">\r\n                  <div>\r\n                    <br></br>\r\n                    Do you want to borrow tokens?\r\n                    <br></br>\r\n                    (You'll get 50% of collateral, in Tokens)\r\n                    <br></br>\r\n                    Type collateral amount (in ETH)\r\n                    <br></br>\r\n                    <br></br>\r\n                    <form\r\n                      onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                        let amount = this.borrowAmount.value;\r\n                        amount = amount * 10 ** 18; //convert to wei\r\n                        this.borrow(amount);\r\n                      }}\r\n                    >\r\n                      <div className=\"form-group mr-sm-2\">\r\n                        <input\r\n                          id=\"borrowAmount\"\r\n                          step=\"0.01\"\r\n                          type=\"number\"\r\n                          ref={(input) => {\r\n                            this.borrowAmount = input;\r\n                          }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder=\"amount...\"\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary\"\r\n                      >\r\n                        BORROW\r\n                      </button>\r\n                    </form>\r\n                  </div>\r\n                </Tab>\r\n                <Tab eventKey=\"payOff\" title=\"Payoff\">\r\n                  <div>\r\n                    <br></br>\r\n                    Do you want to payoff the loan?\r\n                    <br></br>\r\n                    (You'll receive your collateral - fee)\r\n                    <br></br>\r\n                    <br></br>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary\"\r\n                      onClick={(e) => this.payOff(e)}\r\n                    >\r\n                      PAYOFF\r\n                    </button>\r\n                  </div>\r\n                </Tab> */}\r\n              </Tabs>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n      <footer class=\"d-flex flex-wrap justify-content-center align-items-center py-3 my-4 border-top\">\r\n        <div>\r\n          <span class=\"text-muted\">Developer: NUR</span>\r\n          <span class=\"text-muted ml-2\">\r\n            email: medo0o6665@gmail.com\r\n          </span>\r\n          <span class=\"text-muted ml-2\">github: nur1208</span>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}